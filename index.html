<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Namaz Vakitleri</title>
</head>
<body>
<h1>Namaz Vakitleri</h1>
<div id="namaz-text">Yükleniyor...</div>

<script>
// Kullanıcının konumu için örnek: sabit şehir veya API'den konum alınabilir
const city = "Istanbul";
const country = "Turkey";

// Şu anki zamanı al
function kalanSure(vakit) {
    const now = new Date();
    const [saat, dakika] = vakit.split(":");
    const vakitDate = new Date();
    vakitDate.setHours(parseInt(saat), parseInt(dakika), 0, 0);
    
    let fark = (vakitDate - now) / 1000 / 60; // dakika
    if (fark < 0) fark = 0;
    return Math.floor(fark);
}

// API'den namaz vakitlerini çek
fetch(`https://api.aladhan.com/v1/timingsByCity?city=${city}&country=${country}&method=13`)
  .then(res => res.json())
  .then(data => {
    const timings = data.data.timings;
    const now = new Date();
    
    // Her namaz için kalan süre
    let metin = "";
    for (let vakit in timings) {
        const kalan = kalanSure(timings[vakit]);
        metin += `${vakit} namazına ${kalan} dakika kaldı.<br>`;
    }

    // Şu anki vaktin bulunması (en yakın gelecek namaz)
    let enYakinVakit = null;
    let enKisaFark = Infinity;
    for (let vakit in timings) {
        const fark = kalanSure(timings[vakit]);
        if (fark > 0 && fark < enKisaFark) {
            enKisaFark = fark;
            enYakinVakit = vakit;
        }
    }

    metin += `<br>Şu anki vaktin: ${enYakinVakit ? enYakinVakit + " (yaklaşık " + enKisaFark + " dk kaldı)" : "Tüm namazlar geçti"}<br>`;
    
    document.getElementById("namaz-text").innerHTML = metin;
  })
  .catch(err => {
    document.getElementById("namaz-text").innerText = "Namaz vakitleri alınamadı.";
    console.error(err);
  });
</script>
</body>
</html>
